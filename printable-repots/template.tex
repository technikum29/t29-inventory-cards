###   This is a Jinja2 template for a Latex file.
###   We don't use standard jinja syntax to avoid curly bracket/percentage sign
###   confusion.
###   -- SvenK, 2019-08-09
% This document was autogenerated. Don't edit it.
\documentclass{report}
\usepackage[utf8]{inputenc}
\usepackage[ngerman]{babel}
\usepackage{eurosym}

\usepackage{geometry}
\geometry{
  a4paper,
  left=20mm,
  top=30mm,
  right=15mm,
  bottom=20mm
}

% Arial as font
\usepackage{helvet}
\renewcommand{\familydefault}{\sfdefault}

\usepackage{tabularx}
\newcolumntype{L}[1]{>{\raggedright\arraybackslash}p{#1}} % linksbündig mit Breitenangabe
\newcolumntype{C}[1]{>{\centering\arraybackslash}p{#1}} % zentriert mit Breitenangabe
\newcolumntype{R}[1]{>{\raggedleft\arraybackslash}p{#1}} % rechtsbündig mit Breitenangabe

\usepackage{graphicx,tikz}
\graphicspath{
   {« graphicspath »}  % temporary directory setup by inventory2latex.py for whitespace-in-path workaround
   {./}
}

% just for the nice TOC
\newcommand\invisiblesection[1]{%
  \refstepcounter{section}%
  \addcontentsline{toc}{section}{\protect\numberline{\thesection}#1}%
  \sectionmark{#1}}
  

\usepackage{fancyhdr,lastpage}
\pagestyle{fancy}
\fancyhf{}
\fancyhead[C]{%
%\hspace*{.2cm}%
\begin{minipage}[b]{\textwidth}\centering
{\bf technikum29 Computermuseum -- Inventarliste}
\\[.08cm]
«date_identifier»
\textcolor{gray}{(Stand «git_commit»<< if not git_clean >>+edits<< endif >>)}
\end{minipage}}
%\fancyhead[C]{} %zentrierte Kopfzeile
\fancyhead[R]{Seite \thepage\ / \pageref{LastPage}} %Kopfzeile rechts
%\renewcommand{\headrulewidth}{0.5pt} %obere Trennlinie

\lhead{\includegraphics[height=1cm]{../cards/t29-logomarke.pdf}}


\begin{document}
% Here would be the right place to add any kind of text...
%
<< for inv in inventory ->>
\invisiblesection{Inv Nr. «inv[primary_key]» }
\noindent\vspace{.75cm}
\begin{minipage}[t][][b]{.6\textwidth}
  \noindent\begin{tabular}{@{}L{3cm}@{}L{7cm}}
  % Todo: Properties sind nicht sortiert.
  << for field in sorted_fields_for(inv) ->>
     % Minipages to allow for whitespace
     % and multiple lines
     %\begin{minipage}[t]{\linewidth}
      { \bf « field|esc -» }
     %\end{minipage}
     &
     \begin{minipage}[t]{\linewidth}
     «- inv[field]|esc -»
     \end{minipage}
     \\
  << endfor >>
  \end{tabular}
\end{minipage}
\hspace{0.02\linewidth}
\begin{minipage}[t][][b]{.4\textwidth}
   \strut\vspace*{-\baselineskip}\newline
      << if inv[primary_key] in media and media_path_for(inv) ->>
      % This will restrict the image within the (width,height) box
       \includegraphics[width=\linewidth,height=5cm,keepaspectratio]{« media_path_for(inv) »}
%        (insg. « media[inv[primary_key]] | count » Bilder)
      << else ->>
        \begin{tikzpicture}
           \tikzset{every path/.style={text=grey}}
           \draw (0,0) rectangle (5,5) node [black,pos=0.5] {Kein Bild};
        \end{tikzpicture}
      <<- endif ->>
\end{minipage}
%
<< endfor ->>
%
\end{document}
